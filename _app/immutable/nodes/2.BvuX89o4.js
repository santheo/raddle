import{b as ue,d as De,t as L,a as H}from"../chunks/2zDifDwS.js";import"../chunks/CvTyOlqU.js";import{G as Me,i as we,s as ee,j as M,I as ye,k as ie,g as s,a3 as ae,H as Se,l as ce,m as se,q as W,Z as He,n as Ie,o as oe,p as Le,a4 as te,a1 as Ee,K as _e,a5 as he,a6 as Oe,a7 as pe,a8 as ve,a9 as Ue,a0 as Ye,aa as ze,ab as Ae,ac as de,ad as Ve,X as Re,Q as qe,ae as Te,w as Ge,af as Be,_ as Ke,Y as We,ag as Xe,ah as Fe,ai as Pe,b as Qe,v as Ze,z as Je,B as $e,aj as Y,ak as F,C as E,F as V,D as w,A as P,al as me}from"../chunks/CU693qAt.js";import{a as je,l as ea,e as aa,s as Q}from"../chunks/CN-mn5vo.js";import{i as J,b as ra}from"../chunks/B7Esbw1-.js";import{i as sa}from"../chunks/C9JkrQhl.js";import{o as ta}from"../chunks/CAbd_53m.js";function $(e,a){return a}function na(e,a,r,n){for(var l=[],i=a.length,v=0;v<i;v++)Ue(a[v].e,l,!0);var f=i>0&&l.length===0&&r!==null;if(f){var m=r.parentNode;Ye(m),m.append(r),n.clear(),G(e,a[0].prev,a[i-1].next)}ze(l,()=>{for(var I=0;I<i;I++){var b=a[I];f||(n.delete(b.k),G(e,b.prev,b.next)),Ae(b.e,!f)}})}function j(e,a,r,n,l,i=null){var v=e,f={flags:a,items:new Map,first:null},m=(a&Te)!==0;if(m){var I=e;v=M?ee(ye(I)):I.appendChild(Me())}M&&ie();var b=null,D=!1,u=ae(()=>{var x=r();return qe(x)?x:x==null?[]:Ee(x)});we(()=>{var x=s(u),o=x.length;if(D&&o===0)return;D=o===0;let O=!1;if(M){var k=v.data===Se;k!==(o===0)&&(v=ce(),ee(v),se(!1),O=!0)}if(M){for(var C=null,S,A=0;A<o;A++){if(W.nodeType===8&&W.data===He){v=W,O=!0,se(!1);break}var d=x[A],t=n(d,A);S=ke(W,f,C,null,d,t,A,l,a,r),f.items.set(t,S),C=S}o>0&&ee(ce())}M||la(x,f,v,l,a,n,r),i!==null&&(o===0?b?Ie(b):b=oe(()=>i(v)):b!==null&&Le(b,()=>{b=null})),O&&se(!0),s(u)}),M&&(v=W)}function la(e,a,r,n,l,i,v){var U,B,K,X;var f=(l&Be)!==0,m=(l&(de|ve))!==0,I=e.length,b=a.items,D=a.first,u=D,x,o=null,O,k=[],C=[],S,A,d,t;if(f)for(t=0;t<I;t+=1)S=e[t],A=i(S,t),d=b.get(A),d!==void 0&&((U=d.a)==null||U.measure(),(O??(O=new Set)).add(d));for(t=0;t<I;t+=1){if(S=e[t],A=i(S,t),d=b.get(A),d===void 0){var h=u?u.e.nodes_start:r;o=ke(h,a,o,o===null?a.first:o.next,S,A,t,n,l,v),b.set(A,o),k=[],C=[],u=o.next;continue}if(m&&ia(d,S,t,l),d.e.f&te&&(Ie(d.e),f&&((B=d.a)==null||B.unfix(),(O??(O=new Set)).delete(d))),d!==u){if(x!==void 0&&x.has(d)){if(k.length<C.length){var p=C[0],_;o=p.prev;var R=k[0],c=k[k.length-1];for(_=0;_<k.length;_+=1)ge(k[_],p,r);for(_=0;_<C.length;_+=1)x.delete(C[_]);G(a,R.prev,c.next),G(a,o,R),G(a,c,p),u=p,o=c,t-=1,k=[],C=[]}else x.delete(d),ge(d,u,r),G(a,d.prev,d.next),G(a,d,o===null?a.first:o.next),G(a,o,d),o=d;continue}for(k=[],C=[];u!==null&&u.k!==A;)u.e.f&te||(x??(x=new Set)).add(u),C.push(u),u=u.next;if(u===null)continue;d=u}k.push(d),o=d,u=d.next}if(u!==null||x!==void 0){for(var g=x===void 0?[]:Ee(x);u!==null;)u.e.f&te||g.push(u),u=u.next;var y=g.length;if(y>0){var T=l&Te&&I===0?r:null;if(f){for(t=0;t<y;t+=1)(K=g[t].a)==null||K.measure();for(t=0;t<y;t+=1)(X=g[t].a)==null||X.fix()}na(a,g,T,b)}}f&&Ge(()=>{var N;if(O!==void 0)for(d of O)(N=d.a)==null||N.apply()}),_e.first=a.first&&a.first.e,_e.last=o&&o.e}function ia(e,a,r,n){n&de&&he(e.v,a),n&ve?he(e.i,r):e.i=r}function ke(e,a,r,n,l,i,v,f,m,I){var b=(m&de)!==0,D=(m&Ve)===0,u=b?D?Oe(l):pe(l):l,x=m&ve?pe(v):v,o={i:x,v:u,k:i,a:null,e:null,prev:r,next:n};try{return o.e=oe(()=>f(e,u,x,I),M),o.e.prev=r&&r.e,o.e.next=n&&n.e,r===null?a.first=o:(r.next=o,r.e.next=o.e),n!==null&&(n.prev=o,n.e.prev=o.e),o}finally{}}function ge(e,a,r){for(var n=e.next?e.next.e.nodes_start:r,l=a?a.e.nodes_start:r,i=e.e.nodes_start;i!==n;){var v=Re(i);l.before(i),i=v}}function G(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function oa(e,a,r,n,l){var i=e,v="",f;we(()=>{if(v===(v=a()??"")){M&&ie();return}f!==void 0&&(Ae(f),f=void 0),v!==""&&(f=oe(()=>{if(M){W.data;for(var m=ie(),I=m;m!==null&&(m.nodeType!==8||m.data!=="");)I=m,m=Re(m);if(m===null)throw Ke(),We;ue(W,I),i=ee(m);return}var b=v+"",D=De(b);ue(ye(D),D.lastChild),i.before(D)}))})}function va(e,a,r){var n=e==null?"":""+e;return n===""?null:n}function be(e,a,r,n,l,i){var v=e.__className;if(M||v!==r){var f=va(r);(!M||f!==e.getAttribute("class"))&&(f==null?e.removeAttribute("class"):e.className=f),e.__className=r}return i}function da(e){if(M){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var n=e.value;xe(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var l=e.checked;xe(e,"checked",null),e.checked=l}}};e.__on_r=r,Xe(r),je()}}function xe(e,a,r,n){var l=e.__attributes??(e.__attributes={});M&&(l[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||l[a]!==(l[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[Fe]=r),e.removeAttribute(a))}function fa(e,a,r=a){var n=Pe();ea(e,"input",l=>{var i=l?e.defaultValue:e.value;if(i=ne(e)?le(i):i,r(i),n&&i!==(i=a())){var v=e.selectionStart,f=e.selectionEnd;e.value=i??"",f!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(f,e.value.length))}}),(M&&e.defaultValue!==e.value||Qe(a)==null&&e.value)&&r(ne(e)?le(e.value):e.value),Ze(()=>{var l=a();ne(e)&&l===le(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function ne(e){var a=e.type;return a==="number"||a==="range"}function le(e){return e===""?null:+e}var ua=L('<p class="text-red-500 mt-2"> </p>'),ca=L('<div class="bg-white rounded-lg shadow p-4 mb-6"><div class="max-w-2xl mx-auto"><p class="mb-2">Guess the word that goes in either of the active rungs:</p> <input type="text" placeholder="Type a word here…" class="w-full p-3 border-2 border-blue-300 rounded bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"> <!></div></div>'),_a=L(`<div class="text-center p-4 bg-green-100 rounded mb-4"><h3 class="text-xl font-bold text-green-700">Congratulations!</h3> <p>You've successfully climbed the ladder!</p></div>`),ha=L('<span class="text-m text-gray-600 mt-1"> <span class="revealed-word font-mono text-lg"> </span> </span>'),pa=L('<span class="font-mono text-lg"> </span>'),ma=L('<span class="flex flex-col"><!></span>'),ga=L('<span class="letter-box">&nbsp;</span>'),ba=L('<span class="word-box"></span>'),xa=L('<span class="text-gray-400"><!> <span class="ml-1"> </span></span>'),wa=L('<div class="flex items-center space-x-4"><div><!></div></div>'),ya=L("<div><!></div>"),Ia=L(`<main class="min-h-screen bg-gray-100 p-4"><div class="max-w-6xl mx-auto"><div class="mb-6 text-center"><h2 class="text-2xl font-bold ">RADDLE — The Transformation Ladder Game</h2> <p>This is a demo version. Please don't share. Direct all feedback to sandy@mysteryleague.com.</p></div> <!> <div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="bg-white rounded-lg shadow p-6"><div class="space-y-4"></div></div> <div class="bg-white rounded-lg shadow p-6"><h2 class="text-xl font-bold mb-6">Transformations, in alphabetical order</h2> <div class="space-y-3 mb-8"></div></div></div></div></main>`);function Da(e,a){Je(a,!1);let r=F([]),n=F([]),l=[],i=F(""),v=F(!1),f=F(""),m=F();ta(async()=>{var t;try{const _=(await(await fetch("/data/puzzle.txt")).text()).trim().split(`
`),R=[];for(let c=0;c<_.length;c+=2){const g=_[c].trim(),y=c+1<_.length?_[c+1].trim():null;R.push({word:g,transformation:y})}Y(r,R.map((c,g)=>({word:c.word,transformation:c.transformation,isRevealed:g===0||g===R.length-1}))),Y(n,R.filter(c=>c.transformation).map(c=>({text:c.transformation,isUsed:!1})).sort((c,g)=>c.text.localeCompare(g.text))),l=[s(r)[0].word,s(r)[s(r).length-1].word],(t=s(m))==null||t.focus()}catch(h){console.error("Error loading puzzle:",h)}});function I(t){var h;if(t.key==="Enter"){const p=s(i).toUpperCase(),_=s(r).findIndex(c=>!c.isRevealed),R=s(r).length-1-[...s(r)].reverse().findIndex(c=>!c.isRevealed);if(b(p,_)||b(p,R)){const c=b(p,_)?_:R;me(r,s(r)[c].isRevealed=!0),l=[...l,p];const g=s(n).findIndex(y=>c===_?y.text===s(r)[c-1].transformation:y.text===s(r)[c].transformation);g!==-1&&me(n,s(n)[g].isUsed=!0),Y(i,""),Y(f,""),Y(v,s(r).every(y=>y.isRevealed)),s(v)&&Y(n,s(n).map(y=>({...y,isUsed:!0})))}else Y(f,`${p} is not correct.`),Y(i,""),(h=s(m))==null||h.focus()}}function b(t,h){var p;return((p=s(r)[h])==null?void 0:p.word)===t}sa();var D=Ia(),u=E(D),x=V(E(u),2);{var o=t=>{var h=ca(),p=E(h),_=V(E(p),2);da(_),ra(_,g=>Y(m,g),()=>s(m));var R=V(_,2);{var c=g=>{var y=ua(),T=E(y,!0);w(y),P(()=>Q(T,s(f))),H(g,y)};J(R,g=>{s(f)&&g(c)})}w(p),w(h),fa(_,()=>s(i),g=>Y(i,g)),aa("keydown",_,I),H(t,h)},O=t=>{var h=_a();H(t,h)};J(x,t=>{s(v)?t(O,!1):t(o)})}var k=V(x,2),C=E(k),S=E(C);j(S,5,()=>s(r),$,(t,h,p)=>{var _=wa(),R=E(_),c=E(R);{var g=T=>{var U=ma(),B=E(U);{var K=N=>{var z=ha(),q=E(z),Z=V(q),fe=E(Z,!0);w(Z);var re=V(Z);w(z),P((Ce,Ne)=>{Q(q,`${Ce??""} `),Q(fe,s(h).word),Q(re,` ${Ne??""}`)},[()=>s(h).transformation.split("^")[0],()=>s(h).transformation.split("^")[1]],ae),H(N,z)},X=N=>{var z=pa(),q=E(z,!0);w(z),P(()=>Q(q,s(h).word)),H(N,z)};J(B,N=>{p<s(r).length-1&&s(r)[p+1].isRevealed&&s(h).transformation?N(K):N(X,!1)})}w(U),H(T,U)},y=T=>{var U=xa(),B=E(U);j(B,1,()=>s(h).word.split(" "),$,(N,z)=>{var q=ba();j(q,5,()=>Array(s(z).length),$,(Z,fe)=>{var re=ga();H(Z,re)}),w(q),H(N,q)});var K=V(B,2),X=E(K);w(K),w(U),P(N=>Q(X,`(${N??""})`),[()=>s(h).word.split(" ").map(N=>N.length).join(" ")],ae),H(T,U)};J(c,T=>{s(h).isRevealed?T(g):T(y,!1)})}w(R),w(_),P(T=>be(R,1,`flex-1 p-3 rounded ${T??""}`),[()=>s(h).isRevealed?"bg-green-100 revealed":!s(h).isRevealed&&(p===s(r).findIndex(T=>!T.isRevealed)||p===s(r).length-1-[...s(r)].reverse().findIndex(T=>!T.isRevealed))?"bg-blue-50 border-blue-300 border-2":"bg-gray-50"],ae),H(t,_)}),w(S),w(C);var A=V(C,2),d=V(E(A),2);j(d,5,()=>s(n),$,(t,h)=>{var p=ya(),_=E(p);oa(_,()=>s(h).text.replace("^",'<span class="word-placeholder">&nbsp;</span>')),w(p),P(()=>be(p,1,`p-3 rounded bg-gray-100 ${(s(h).isUsed?"line-through text-gray-400":"")??""}`)),H(t,p)}),w(d),w(A),w(k),w(u),w(D),H(e,D),$e()}export{Da as component};
